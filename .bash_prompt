# Colorize `ls` output
#     * Color/text combinations: http://webhome.csc.uvic.ca/~sae/seng265/fall04/tips/s265s047-tips/bash-using-colors.html
#     * Colors are suited for Solarized Light theme (which can be imported from .init folder)
#       along with my customizations (keyboard shortcuts, font, etc.)
export LSCOLORS=ehfxcxdxbxegedabagacad
# Colorize "advanced" output such as coreutils `ls` and `tree`
# TODO: switch to updated coreutils with better `ls` support
#       (eg. pipe through `more -r` to display colorized, paged output)
export LS_COLORS='di=34;47:ln=35:so=32:pi=33:ex=31:bd=34;46:cd=34;43:su=0;41:sg=0;46:tw=0;42:ow=0;43:'

# Load Git prompt for displaying repository status in command line
[ -f "/usr/local/opt/git/etc/bash_completion.d/git-prompt.sh" ] && source "/usr/local/opt/git/etc/bash_completion.d/git-prompt.sh"

# Only show username@server over SSH
function __ssh_info() {
	if [ -n "$SSH_CLIENT" ] || [ -n "$SSH_TTY" ]; then
		printf "\e[0;37;46m`whoami`@`hostname -s`\e[0m\e[47m "
	fi
}

function __print_before_the_prompt() {

	# Fill with characters for nicer separation
	let fillsize=${COLUMNS}
	fill=""
	while [ "$fillsize" -gt "0" ]
	do
	fill="-${fill}"
	let fillsize=${fillsize}-1
	done

	printf "\e[0m\e[47m%s" "$fill"
	printf "\n%s\e[1;30m%s%s\n" "$(__ssh_info)" "${PWD/$HOME/~}" "$(__git_ps1 "\e[0m [\e[0;34m%s\e[0m]")"

}

GIT_PS1_SHOWDIRTYSTATE=true
PROMPT_COMMAND=__print_before_the_prompt

PS1="\[\e[0;31m\]â¦¿\[\e[0m\e[1m\] "
# Reset color to default for command output
trap "printf '\e[0m'" DEBUG
