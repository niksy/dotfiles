#!/usr/bin/env bash

# ==============================================================================
# Additional application config
# ==============================================================================

# ==============================================================================
# TextEdit
# ==============================================================================

# Use plain text by default
defaults write com.apple.TextEdit RichText -int 0

# Change monospace typeface to Consolas
defaults write com.apple.TextEdit NSFixedPitchFont -string "Consolas"
defaults write com.apple.TextEdit NSFixedPitchFontSize -int 16

# ==============================================================================
# Mail
# ==============================================================================

# Change monospace typeface to Consolas
defaults write com.apple.mail NSFixedPitchFont -string "Consolas"
defaults write com.apple.mail NSFixedPitchFontSize -int 14

# ==============================================================================
# QuickLook
# ==============================================================================

# Adjust QlColorCode typeface and theme
defaults write org.n8gray.QLColorCode font Consolas
defaults write org.n8gray.QLColorCode fontSizePoints 10
defaults write org.n8gray.QLColorCode extraHLFlags '-l'

# ==============================================================================
# Notification Center
# ==============================================================================

# Change Notification Center sound from horrible Basso to something much nicer.
# ------------------------------------------------------------------------------

cp /System/Library/Sounds/Pop.aiff $HOME/Library/Sounds/Basso.aiff
killall NotificationCenter

# ==============================================================================
# Google Chrome
# ==============================================================================

# Use the system-native print preview dialog
defaults write com.google.Chrome DisablePrintPreview -bool true

# Expand the print dialog by default
defaults write com.google.Chrome PMPrintingExpandedStateForPrint2 -bool true

# ==============================================================================
# Transmission
# ==============================================================================

# Hide the donate message
defaults write org.m0k.transmission WarningDonate -bool false

# Hide the legal disclaimer
defaults write org.m0k.transmission WarningLegal -bool false

# IP block list.
# Source: https://giuliomac.wordpress.com/2014/02/19/best-blocklist-for-transmission/
defaults write org.m0k.transmission BlocklistNew -bool true
defaults write org.m0k.transmission BlocklistURL -string "http://john.bitsurge.net/public/biglist.p2p.gz"
defaults write org.m0k.transmission BlocklistAutoUpdate -bool true

# ==============================================================================
# Full cleanup
# ==============================================================================

# Recache affected applications
defaults read org.n8gray.QLColorCode
defaults read com.apple.mail

# Kill affected applications
for app in "cfprefsd" "Transmission" "Google Chrome" "TextEdit" "Messages" "NotificationCenter";
do
	killall "$app" > /dev/null 2>&1
done
echo "Done. Note that some of these changes require a logout/restart to take effect."
